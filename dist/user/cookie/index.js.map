{"version":3,"file":"index.js","sources":["../../../src/user/cookie/index.js"],"sourcesContent":["import ow from \"ow\";\r\nimport { getDocument } from \"ssr-window\";\r\n\r\n/**\r\n * Gets the Cookie value\r\n * @param name{String} - name of Cookie\r\n * @return {string|undefined}\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie\r\n * @example\r\n * // How to get value of Cookie?\r\n * setCookie(\"myCookieName\", \"myValue\");\r\n * const savedValue = getCookie(\"myCookieName\");\r\n * console.debug(savedValue); // => \"myValue\"\r\n */\r\nconst getCookie = (name) => {\r\n\r\n  ow(name, ow.string);\r\n\r\n  const matches = getDocument().cookie.match(new RegExp(\r\n    \"(?:^|; )\" + name.replace(/([$?*|{}\\]\\\\^])/g, \"\\\\$1\") + \"=([^;]*)\"\r\n  ));\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n};\r\n\r\n/**\r\n * Sets the Cookie value\r\n * @param name{String} - name of Cookie\r\n * @param value{String} - value of Cookie\r\n * @param options{Object=} - options of Cookie\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie\r\n * @example\r\n * // How to set Cookie for one day or other time?\r\n * setCookie(\"myCookie\", \"value\", { expires: 86400 }) // expires in sec\r\n */\r\nconst setCookie = (name, value, options = {}) => {\r\n\r\n  ow(name, ow.string);\r\n  ow(value, ow.string);\r\n  ow(options, ow.object);\r\n\r\n  let expires = options.expires;\r\n  if (typeof expires === \"number\" && expires) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + expires * 1000);\r\n    expires = options.expires = d;\r\n  }\r\n  if (expires && expires.toUTCString) {\r\n    options.expires = expires.toUTCString();\r\n  }\r\n  value = encodeURIComponent(value);\r\n  let updatedCookie = name + \"=\" + value;\r\n  for (let propName in options) {\r\n    updatedCookie += \"; \" + propName;\r\n    let propValue = options[propName];\r\n    if (propValue !== true) {\r\n      updatedCookie += \"=\" + propValue;\r\n    }\r\n  }\r\n  getDocument().cookie = updatedCookie;\r\n};\r\n\r\nexport {\r\n  getCookie,\r\n  setCookie\r\n};\r\n"],"names":["getCookie","name","ow","string","matches","getDocument","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","value","options","object","expires","d","Date","setTime","getTime","toUTCString","encodeURIComponent","updatedCookie","propName","propValue"],"mappings":";;;;;;;;;;;GAcMA,MAAAA,UAAaC,OAEjBC,GAAGD,KAAMC,GAAGC,QAEZ,MAAMC,QAAUC,cAAcC,OAAOC,MAAM,IAAIC,OAC7C,WAAaP,KAAKQ,QAAQ,mBAAoB,QAAU,aAE1D,OAAOL,QAAUM,mBAAmBN,QAAQ,SAAMO,CAAS;;;;;;;;;;GAavDC,MAAAA,UAAYA,CAACX,KAAMY,MAAOC,QAAU,CAAA,KAExCZ,GAAGD,KAAMC,GAAGC,QACZD,GAAGW,MAAOX,GAAGC,QACbD,GAAGY,QAASZ,GAAGa,QAEf,IAAIC,QAAUF,QAAQE,QACtB,UAAWA,UAAY,UAAYA,QAAS,CAC1C,MAAMC,EAAI,IAAIC,KACdD,EAAEE,QAAQF,EAAEG,UAAYJ,QAAU,MAClCA,QAAUF,QAAQE,QAAUC,CAC9B,CACA,GAAID,SAAWA,QAAQK,YACrBP,QAAQE,QAAUA,QAAQK,cAE5BR,MAAQS,mBAAmBT,OAC3B,IAAIU,cAAgBtB,KAAO,IAAMY,MACjC,IAAK,IAAIW,YAAYV,QAAS,CAC5BS,eAAiB,KAAOC,SACxB,IAAIC,UAAYX,QAAQU,UACxB,GAAIC,YAAc,KAChBF,eAAiB,IAAME,SAE3B,CACApB,cAAcC,OAASiB,aAAa"}