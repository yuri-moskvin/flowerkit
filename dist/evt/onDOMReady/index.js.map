{"version":3,"file":"index.js","sources":["../../../src/evt/onDOMReady/index.js"],"sourcesContent":["import ow from \"ow\";\r\nimport { getDocument } from \"ssr-window\";\r\n\r\n/**\r\n * Runs callback when DOM tree can be manipulated\r\n * @param cb{Function} - callback function\r\n * @param isAutoInit{Boolean=} - attaches event immediately\r\n * @return {{ handler: Function, addListener: Function, removeListener: Function }}\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/DOMContentLoaded_event\r\n * @example\r\n * // How to check if DOM is ready?\r\n * const callback = () => console.log(\"DOM Content Loaded\");\r\n * onDOMReady(callback);\r\n */\r\nconst onDOMReady = (cb, isAutoInit = true) => {\r\n\r\n  ow(cb, ow.function);\r\n\r\n  const handler = () => {\r\n    cb();\r\n  };\r\n\r\n  const addListener = () => {\r\n    if (getDocument().readyState === \"loading\") {\r\n      getDocument().addEventListener(\"DOMContentLoaded\", handler);\r\n    } else {\r\n      handler();\r\n    }\r\n  };\r\n\r\n  const removeListener = () => {\r\n    getDocument().removeEventListener(\"DOMContentLoaded\", handler);\r\n  };\r\n\r\n  if (isAutoInit) {\r\n    addListener();\r\n  }\r\n\r\n  return {\r\n    handler,\r\n    addListener,\r\n    removeListener\r\n  };\r\n\r\n};\r\n\r\nexport {\r\n  onDOMReady\r\n};\r\n"],"names":["onDOMReady","cb","isAutoInit","ow","function","handler","addListener","getDocument","readyState","addEventListener","removeListener","removeEventListener"],"mappings":";;;;;;;;;;;GAcMA,MAAAA,WAAaA,CAACC,GAAIC,WAAa,QAEnCC,GAAGF,GAAIE,GAAGC,UAEV,MAAMC,QAAUA,KACdJ,IAAI,EAGN,MAAMK,YAAcA,KAClB,GAAIC,cAAcC,aAAe,UAC/BD,cAAcE,iBAAiB,mBAAoBJ,cAEnDA,SACF,EAGF,MAAMK,eAAiBA,KACrBH,cAAcI,oBAAoB,mBAAoBN,QAAQ,EAGhE,GAAIH,WACFI,cAGF,MAAO,CACLD,gBACAC,wBACAI,8BACD"}